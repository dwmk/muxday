<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MuxDay - Code, Create, Share</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material-darker.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="logo">MuxDay</span>
            </div>
            <div class="nav-menu">
                <a href="/" class="nav-link">Explore</a>
                <a href="#" class="nav-link" id="myProjectsBtn" style="display:none;">My Projects</a>
                <button class="btn-primary" id="createProjectBtn" style="display:none;">Create New</button>
                <button class="btn-secondary" id="loginBtn">Login</button>
                <button class="btn-primary" id="signupBtn">Sign Up</button>
                <div class="user-menu" id="userMenu" style="display:none;">
                    <img src="" alt="Avatar" class="nav-avatar" id="navAvatar">
                    <div class="user-dropdown">
                        <a href="#" id="profileLink">My Profile</a>
                        <a href="#" id="settingsLink">Settings</a>
                        <a href="#" id="logoutBtn">Logout</a>
                    </div>
                </div>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <section class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">Build. Share. Inspire.</h1>
                    <p class="hero-subtitle">The collaborative playground for frontend developers</p>
                    <button class="btn-hero" id="heroGetStarted">Get Started</button>
                </div>
            </section>
            
            <section class="projects-grid" id="projectsGrid">
                <h2 class="section-title">Trending Projects</h2>
                <div class="grid" id="trendingProjects">
                    <div class="loading">Loading projects...</div>
                </div>
            </section>
        </div>

        <!-- Editor Page -->
        <div id="editorPage" class="page" style="display:none;">
            <div class="editor-container">
                <div class="editor-header">
                    <input type="text" id="projectTitle" placeholder="Untitled Project" class="project-title-input">
                    <div class="editor-actions">
                        <button class="btn-icon" id="saveProjectBtn" title="Save">üíæ</button>
                        <button class="btn-icon" id="runCodeBtn" title="Run">‚ñ∂Ô∏è</button>
                        <button class="btn-secondary" id="shareProjectBtn">Share</button>
                    </div>
                </div>
                
                <div class="editor-layout">
                    <div class="editor-panels">
                        <div class="editor-panel">
                            <div class="panel-header">HTML</div>
                            <textarea id="htmlEditor"></textarea>
                        </div>
                        <div class="editor-panel">
                            <div class="panel-header">CSS</div>
                            <textarea id="cssEditor"></textarea>
                        </div>
                        <div class="editor-panel">
                            <div class="panel-header">JavaScript</div>
                            <textarea id="jsEditor"></textarea>
                        </div>
                    </div>
                    
                    <div class="preview-panel">
                        <div class="panel-header">
                            Preview
                            <button class="btn-icon" id="refreshPreview" title="Refresh">üîÑ</button>
                        </div>
                        <iframe id="previewFrame" sandbox="allow-scripts"></iframe>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profilePage" class="page" style="display:none;">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-banner" id="profileBanner"></div>
                    <div class="profile-info">
                        <img src="" alt="Avatar" class="profile-avatar" id="profileAvatar">
                        <div class="profile-details">
                            <div class="profile-name">
                                <h1 id="profileDisplayName"></h1>
                                <span class="verified-badge" id="verifiedBadge" style="display:none;">‚úì</span>
                            </div>
                            <p class="profile-username" id="profileUsername"></p>
                            <p class="profile-bio" id="profileBio"></p>
                            <div class="profile-social" id="profileSocial"></div>
                        </div>
                        <button class="btn-primary" id="editProfileBtn" style="display:none;">Edit Profile</button>
                    </div>
                </div>
                
                <div class="profile-projects">
                    <h2>Projects</h2>
                    <div class="grid" id="userProjects">
                        <div class="loading">Loading projects...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Project View Page -->
        <div id="projectViewPage" class="page" style="display:none;">
            <div class="project-view-container">
                <div class="project-view-header">
                    <div class="project-view-info">
                        <h1 id="viewProjectTitle"></h1>
                        <div class="project-meta">
                            <a href="#" id="viewProjectAuthor" class="author-link"></a>
                            <span class="project-stats">
                                <span>üëÅÔ∏è <span id="viewProjectViews">0</span></span>
                            </span>
                        </div>
                    </div>
                    <div class="project-view-actions">
                        <button class="btn-secondary" id="forkProjectBtn">Fork</button>
                        <button class="btn-primary" id="editProjectBtn" style="display:none;">Edit</button>
                    </div>
                </div>
                
                <div class="project-view-frame">
                    <iframe id="projectViewFrame" sandbox="allow-scripts"></iframe>
                </div>
                
                <div class="project-view-code">
                    <button class="btn-secondary" id="toggleCodeBtn">View Code</button>
                    <div id="codeDisplay" style="display:none;">
                        <div class="code-section">
                            <h3>HTML</h3>
                            <pre><code id="displayHtml"></code></pre>
                        </div>
                        <div class="code-section">
                            <h3>CSS</h3>
                            <pre><code id="displayCss"></code></pre>
                        </div>
                        <div class="code-section">
                            <h3>JavaScript</h3>
                            <pre><code id="displayJs"></code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="loginForm" class="auth-form">
                <h2>Welcome Back</h2>
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button class="btn-primary" id="loginSubmit">Login</button>
                <p class="auth-switch">Don't have an account? <a href="#" id="showSignup">Sign up</a></p>
            </div>
            
            <div id="signupForm" class="auth-form" style="display:none;">
                <h2>Join MuxDay</h2>
                <input type="text" id="signupUsername" placeholder="Username" required>
                <input type="text" id="signupDisplayName" placeholder="Display Name" required>
                <input type="email" id="signupEmail" placeholder="Email" required>
                <input type="password" id="signupPassword" placeholder="Password" required>
                <button class="btn-primary" id="signupSubmit">Sign Up</button>
                <p class="auth-switch">Already have an account? <a href="#" id="showLogin">Login</a></p>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close">&times;</span>
            <h2>Edit Profile</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label>Display Name</label>
                    <input type="text" id="editDisplayName" required>
                </div>
                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="editBio" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Avatar</label>
                    <input type="text" id="editAvatarUrl" placeholder="Image URL">
                    <input type="file" id="editAvatarFile" accept="image/*">
                </div>
                <div class="form-group">
                    <label>Banner</label>
                    <input type="text" id="editBannerUrl" placeholder="Image URL">
                    <input type="file" id="editBannerFile" accept="image/*">
                </div>
                <div class="form-group">
                    <label>GitHub</label>
                    <input type="text" id="editGithub" placeholder="github.com/username">
                </div>
                <div class="form-group">
                    <label>CodePen</label>
                    <input type="text" id="editCodepen" placeholder="codepen.io/username">
                </div>
                <div class="form-group">
                    <label>LinkedIn</label>
                    <input type="text" id="editLinkedin" placeholder="linkedin.com/in/username">
                </div>
                <div class="form-group">
                    <label>Instagram</label>
                    <input type="text" id="editInstagram" placeholder="instagram.com/username">
                </div>
                <div class="form-group">
                    <label>Discord</label>
                    <input type="text" id="editDiscord" placeholder="username#0000">
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>